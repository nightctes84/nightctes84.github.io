<!DOCTYPE html>
<html lang="es">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Sorteo Dinรกmico โจ</title>
ย ยย
ย ย <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
ย ย <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
ย ยย
ย ย <style>
ย ย ย ย body {
ย ย ย ย ย ย background: linear-gradient(135deg, #1f2833, #0a0e14);
ย ย ย ย ย ย font-family: 'Poppins', sans-serif;
ย ย ย ย ย ย color: #c5c6c7;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย min-height: 100vh;
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย text-align: center;
ย ย ย ย }

ย ย ย ย .container {
ย ย ย ย ย ย background-color: #0b0c10;
ย ย ย ย ย ย padding: 40px;
ย ย ย ย ย ย border-radius: 20px;
ย ย ย ย ย ย box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
ย ย ย ย ย ย width: 90%;
ย ย ย ย ย ย max-width: 600px;
ย ย ย ย ย ย border: 1px solid #45a29e;
ย ย ย ย }

ย ย ย ย .title {
ย ย ย ย ย ย color: #66fcf1;
ย ย ย ย ย ย font-size: 2.5rem;
ย ย ย ย ย ย margin-bottom: 10px;
ย ย ย ย ย ย text-shadow: 0 0 10px rgba(102, 252, 241, 0.5);
ย ย ย ย }

ย ย ย ย .subtitle {
ย ย ย ย ย ย font-size: 1.1rem;
ย ย ย ย ย ย color: #c5c6c7;
ย ย ย ย ย ย margin-bottom: 30px;
ย ย ย ย }

ย ย ย ย .winner-box {
ย ย ย ย ย ย background: #1f2833;
ย ย ย ย ย ย padding: 30px;
ย ย ย ย ย ย border-radius: 15px;
ย ย ย ย ย ย margin-bottom: 30px;
ย ย ย ย ย ย min-height: 100px;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย ย ย transition: all 0.5s ease;
ย ย ย ย ย ย border: 2px solid transparent;
ย ย ย ย }

ย ย ย ย .winner-box.celebrating {
ย ย ย ย ย ย border-color: #66fcf1;
ย ย ย ย ย ย box-shadow: 0 0 25px rgba(102, 252, 241, 0.7);
ย ย ย ย }

ย ย ย ย #winner-name {
ย ย ย ย ย ย font-size: 2rem;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย color: #45a29e;
ย ย ย ย ย ย transition: all 0.5s ease;
ย ย ย ย }

ย ย ย ย .name-placeholder {
ย ย ย ย ย ย color: #45a29e;
ย ย ย ย }

ย ย ย ย .winner-box.celebrating #winner-name {
ย ย ย ย ย ย font-size: 3rem;
ย ย ย ย ย ย color: #66fcf1;
ย ย ย ย ย ย text-shadow: 0 0 15px rgba(102, 252, 241, 0.8);
ย ย ย ย ย ย animation: pulse 1.5s infinite;
ย ย ย ย }

ย ย ย ย .draw-button {
ย ย ย ย ย ย background: #66fcf1;
ย ย ย ย ย ย color: #0b0c10;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย padding: 15px 30px;
ย ย ย ย ย ย font-size: 1.2rem;
ย ย ย ย ย ย font-weight: 600;
ย ย ย ย ย ย border-radius: 50px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: transform 0.3s, background-color 0.3s;
ย ย ย ย ย ย box-shadow: 0 5px 15px rgba(102, 252, 241, 0.4);
ย ย ย ย }

ย ย ย ย .draw-button:hover {
ย ย ย ย ย ย transform: translateY(-5px);
ย ย ย ย ย ย background: #45a29e;
ย ย ย ย }

ย ย ย ย .draw-button:disabled {
ย ย ย ย ย ย background-color: #45a29e;
ย ย ย ย ย ย cursor: not-allowed;
ย ย ย ย ย ย opacity: 0.6;
ย ย ย ย ย ย transform: none;
ย ย ย ย ย ย box-shadow: none;
ย ย ย ย }

ย ย ย ย .status-text {
ย ย ย ย ย ย margin-top: 20px;
ย ย ย ย ย ย font-size: 0.9rem;
ย ย ย ย ย ย color: #c5c6c7;
ย ย ย ย }

ย ย ย ย /* Confetti Animation */
ย ย ย ย .confetti-container {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย pointer-events: none;
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย }

ย ย ย ย .confetti {
ย ย ย ย ย ย width: 10px;
ย ย ย ย ย ย height: 10px;
ย ย ย ย ย ย background-color: #66fcf1;
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย top: -10px;
ย ย ย ย ย ย opacity: 0;
ย ย ย ย ย ย animation: fall 2s forwards;
ย ย ย ย ย ย z-index: 10;
ย ย ย ย }

ย ย ย ย @keyframes fall {
ย ย ย ย ย ย to {
ย ย ย ย ย ย ย ย transform: translateY(100vh) rotate(720deg);
ย ย ย ย ย ย ย ย opacity: 1;
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย @keyframes pulse {
ย ย ย ย ย ย 0% { transform: scale(1); }
ย ย ย ย ย ย 50% { transform: scale(1.05); }
ย ย ย ย ย ย 100% { transform: scale(1); }
ย ย ย ย }
ย ย </style>
</head>
<body>

ย ย <div class="container">
ย ย ย ย <h1 class="title">ยกSorteo Dinรกmico! ๐</h1>
ย ย ย ย <p class="subtitle">Presiona el botรณn para descubrir al ganador.</p>
ย ย ย ยย
ย ย ย ย <div class="winner-box">
ย ย ย ย ย ย <h2 id="winner-name" class="name-placeholder">Cargando nombres...</h2>
ย ย ย ย ย ย <div class="confetti-container" id="confetti-container"></div>
ย ย ย ย </div>
ย ย ย ยย
ย ย ย ย <button id="draw-button" class="draw-button" disabled>
ย ย ย ย ย ย <i class="fas fa-magic"></i> Sortear
ย ย ย ย </button>

ย ย ย ย <p class="status-text" id="status-text"></p>
ย ย </div>

ย ย <script>
ย ย ย ย document.addEventListener('DOMContentLoaded', () => {
ย ย ย ย ย ย const winnerNameEl = document.getElementById('winner-name');
ย ย ย ย ย ย const drawButton = document.getElementById('draw-button');
ย ย ย ย ย ย const winnerBox = document.querySelector('.winner-box');
ย ย ย ย ย ย const statusTextEl = document.getElementById('status-text');

ย ย ย ย ย ย // โ๏ธ IMPORTANTE: Reemplaza esta URL con la tuya
ย ย ย ย ย ย const SPREADSHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTOE83UtRKeje8Y7MjDYrbOemFyXPJq2dZdyxdxlrsnKT9B7JvFU7ALNnANOj266uFox7k-NvXGUItA/pub?output=csv';
ย ย ย ย ย ยย
ย ย ย ย ย ย let names = [];
ย ย ย ย ย ย let drawingInterval;

ย ย ย ย ย ย const fetchNames = async () => {
ย ย ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย ย ย statusTextEl.textContent = 'Cargando lista de nombres...';
ย ย ย ย ย ย ย ย ย ย const response = await fetch(SPREADSHEET_URL);
ย ย ย ย ย ย ย ย ย ย if (!response.ok) {
ย ย ย ย ย ย ย ย ย ย ย ย throw new Error('No se pudo cargar la hoja de cรกlculo. Revisa la URL.');
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย const text = await response.text();
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย // Separa los nombres por lรญnea
ย ย ย ย ย ย ย ย ย ย names = text.split('\n').map(name => name.trim()).filter(name => name !== '');
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย if (names.length === 0) {
ย ย ย ย ย ย ย ย ย ย ย ย statusTextEl.textContent = 'โ๏ธ ยกNo se encontraron nombres en la hoja de cรกlculo!';
ย ย ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย ย ย statusTextEl.textContent = `โ Se cargaron ${names.length} nombres.`;
ย ย ย ย ย ย ย ย ย ย ย ย drawButton.disabled = false;
ย ย ย ย ย ย ย ย ย ย ย ย winnerNameEl.textContent = 'ยกListo para sortear!';
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย ย ย console.error('Error al cargar nombres:', error);
ย ย ย ย ย ย ย ย ย ย statusTextEl.textContent = `โ Error: ${error.message}`;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย };

ย ย ย ย ย ย const runDrawingAnimation = () => {
ย ย ย ย ย ย ย ย const totalDuration = 5000; // 5 segundos
ย ย ย ย ย ย ย ย const intervalDuration = 50; // 50 milisegundos
ย ย ย ย ย ย ย ย let startTime = Date.now();

ย ย ย ย ย ย ย ย drawingInterval = setInterval(() => {
ย ย ย ย ย ย ย ย ย ย if (names.length === 0) {
ย ย ย ย ย ย ย ย ย ย ย ย clearInterval(drawingInterval);
ย ย ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย const randomIndex = Math.floor(Math.random() * names.length);
ย ย ย ย ย ย ย ย ย ย winnerNameEl.textContent = names[randomIndex];
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย // Reduce la velocidad gradualmente
ย ย ย ย ย ย ย ย ย ย const elapsedTime = Date.now() - startTime;
ย ย ย ย ย ย ย ย ย ย if (elapsedTime > totalDuration) {
ย ย ย ย ย ย ย ย ย ย ย ย clearInterval(drawingInterval);
ย ย ย ย ย ย ย ย ย ย ย ย selectWinner();
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }, intervalDuration);
ย ย ย ย ย ย };

ย ย ย ย ย ย const selectWinner = () => {
ย ย ย ย ย ย ย ย const winnerIndex = Math.floor(Math.random() * names.length);
ย ย ย ย ย ย ย ย const winner = names[winnerIndex];
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย winnerNameEl.textContent = winner;
ย ย ย ย ย ย ย ย winnerBox.classList.add('celebrating');
ย ย ย ย ย ย ย ย drawButton.disabled = true;
ย ย ย ย ย ย ย ย drawButton.textContent = 'ยกGanador!';

ย ย ย ย ย ย ย ย // Elimina al ganador de la lista para no repetirlo
ย ย ย ย ย ย ย ย names.splice(winnerIndex, 1);
ย ย ย ย ย ย ย ย statusTextEl.textContent = `ยกFelicidades a ${winner}! ๐ Quedan ${names.length} nombres.`;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย // Efecto de confeti
ย ย ย ย ย ย ย ย createConfetti();
ย ย ย ย ย ย };

ย ย ย ย ย ย const createConfetti = () => {
ย ย ย ย ย ย ย ย const confettiCount = 50;
ย ย ย ย ย ย ย ย const confettiContainer = document.getElementById('confetti-container');
ย ย ย ย ย ย ย ย for (let i = 0; i < confettiCount; i++) {
ย ย ย ย ย ย ย ย ย ย const confetti = document.createElement('div');
ย ย ย ย ย ย ย ย ย ย confetti.classList.add('confetti');
ย ย ย ย ย ย ย ย ย ย confetti.style.left = `${Math.random() * 100}%`;
ย ย ย ย ย ย ย ย ย ย confetti.style.animationDelay = `${Math.random() * 1}s`;
ย ย ย ย ย ย ย ย ย ย confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
ย ย ย ย ย ย ย ย ย ย confettiContainer.appendChild(confetti);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย };

ย ย ย ย ย ย drawButton.addEventListener('click', () => {
ย ย ย ย ย ย ย ย if (names.length === 0) {
ย ย ย ย ย ย ย ย ย ย statusTextEl.textContent = 'ยกNo hay mรกs nombres para sortear!';
ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย drawButton.disabled = true;
ย ย ย ย ย ย ย ย winnerBox.classList.remove('celebrating');
ย ย ย ย ย ย ย ย winnerNameEl.textContent = 'ยกSorteando...!';
ย ย ย ย ย ย ย ย runDrawingAnimation();
ย ย ย ย ย ย });

ย ย ย ย ย ย fetchNames(); // Llama a la funciรณn al cargar la pรกgina
ย ย ย ย });
ย ย </script>
</body>
</html>
